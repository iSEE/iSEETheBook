<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>iSEETheBook - 2&nbsp; The user interface</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./first.html" rel="next">
<link href="./intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ui.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The user interface</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">iSEETheBook</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ui.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The user interface</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./first.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">First use</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">2.1</span> Overview</a></li>
  <li><a href="#panels" id="toc-panels" class="nav-link" data-scroll-target="#panels"><span class="header-section-number">2.2</span> Panels</a></li>
  <li><a href="#actions" id="toc-actions" class="nav-link" data-scroll-target="#actions"><span class="header-section-number">2.3</span> Actions</a>
  <ul class="collapse">
  <li><a href="#scrolling" id="toc-scrolling" class="nav-link" data-scroll-target="#scrolling"><span class="header-section-number">2.3.1</span> Scrolling</a></li>
  <li><a href="#collabsible-boxes" id="toc-collabsible-boxes" class="nav-link" data-scroll-target="#collabsible-boxes"><span class="header-section-number">2.3.2</span> Collabsible boxes</a></li>
  <li><a href="#selection-inputs" id="toc-selection-inputs" class="nav-link" data-scroll-target="#selection-inputs"><span class="header-section-number">2.3.3</span> Selection inputs</a></li>
  <li><a href="#checkboxes" id="toc-checkboxes" class="nav-link" data-scroll-target="#checkboxes"><span class="header-section-number">2.3.4</span> Checkboxes</a></li>
  </ul></li>
  <li><a href="#collapsible-boxes-of-parameters" id="toc-collapsible-boxes-of-parameters" class="nav-link" data-scroll-target="#collapsible-boxes-of-parameters"><span class="header-section-number">2.4</span> Collapsible boxes of parameters</a>
  <ul class="collapse">
  <li><a href="#data-parameters" id="toc-data-parameters" class="nav-link" data-scroll-target="#data-parameters"><span class="header-section-number">2.4.1</span> Data parameters</a></li>
  <li><a href="#visual-parameters" id="toc-visual-parameters" class="nav-link" data-scroll-target="#visual-parameters"><span class="header-section-number">2.4.2</span> Visual parameters</a></li>
  <li><a href="#selection-parameters" id="toc-selection-parameters" class="nav-link" data-scroll-target="#selection-parameters"><span class="header-section-number">2.4.3</span> Selection parameters</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The user interface</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="overview" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">2.1</span> Overview</h2>
<p>In this chapter, we describe the contents and layout of a standard <a href="https://bioconductor.org/packages/iSEE/"><em>iSEE</em></a> app.</p>
<p>Specifically, we focus on the appearance of the interactive point-and-click interface presented to end-users who come to simply explore the data set without any programming knowledge required.</p>
<p>Illustrative screenshots are taken from the <a href="https://bioconductor.org/packages/iSEE/"><em>iSEE</em></a> app produced by the example code given in the help page of the <code>iSEE()</code> function, which can be access from an <em>R</em> console by typing either <code>help(iSEE)</code> or <code>?iSEE</code>.</p>
</section>
<section id="panels" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="panels"><span class="header-section-number">2.2</span> Panels</h2>
<p>Under entirely default settings, data sets loaded into the <a href="https://bioconductor.org/packages/iSEE/"><em>iSEE</em></a> app are automatically parsed for standard information stored in <em>SummarizedExperiment</em> objects. Based on the information available and a set of eight core panel types designed to display different pieces of information, the <code>iSEE()</code> function automatically populates the interface with one panel of each type for which the relevant information is available.</p>
<div id="fig-iSEE" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/iSEE.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2.1: First row of panel in the iSEE app interface, for an example data set.</figcaption>
</figure>
</div>
<p>The example code given in the help page of the <code>iSEE()</code> function produces an <a href="https://bioconductor.org/packages/iSEE/"><em>iSEE</em></a> app that showcases all eight core panel types. For simplicity, <a href="#fig-core-panel-types">Figure&nbsp;<span>2.2</span></a> displays only the main component of each of those eight core panel types, for an example data set. Additional components accompanying each panel and the purpose of each panel will be discussed in a separate chapter.</p>
<div id="fig-core-panel-types" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-ReducedDimensionPlot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/ReducedDimensionPlot.png" class="img-fluid figure-img" data-ref-parent="fig-core-panel-types"></p>
<figcaption class="figure-caption">(a) Reduced dimension plot</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-RowDataTable" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/RowDataTable.png" class="img-fluid figure-img" data-ref-parent="fig-core-panel-types"></p>
<figcaption class="figure-caption">(b) Row data table</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-FeatureAssayPlot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/FeatureAssayPlot.png" class="img-fluid figure-img" data-ref-parent="fig-core-panel-types"></p>
<figcaption class="figure-caption">(c) Feature assay plot</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-ColumnDataPlot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/ColumnDataPlot.png" class="img-fluid figure-img" data-ref-parent="fig-core-panel-types"></p>
<figcaption class="figure-caption">(d) Column data plot</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-RowDataPlot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/RowDataPlot.png" class="img-fluid figure-img" data-ref-parent="fig-core-panel-types"></p>
<figcaption class="figure-caption">(e) Row data plot</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-SampleAssayPlot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/SampleAssayPlot.png" class="img-fluid figure-img" data-ref-parent="fig-core-panel-types"></p>
<figcaption class="figure-caption">(f) Sample assay plot</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-ColumnDataTable" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/ColumnDataTable.png" class="img-fluid figure-img" data-ref-parent="fig-core-panel-types"></p>
<figcaption class="figure-caption">(g) Column data table</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-ComplexHeatmapPlotlumnDataPlot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/ComplexHeatmapPlot.png" class="img-fluid figure-img" data-ref-parent="fig-core-panel-types"></p>
<figcaption class="figure-caption">(h) Complex heatmap plot</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2.2: Main component the eight core panel type in the <a href="https://bioconductor.org/packages/iSEE/"><em>iSEE</em></a> package, in their default configuration.</figcaption><p></p>
</figure>
</div>
</section>
<section id="actions" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="actions"><span class="header-section-number">2.3</span> Actions</h2>
<p>Once the panels are loaded into the interface, users are free to interact with the interface in any way they see fit.</p>
<section id="scrolling" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="scrolling"><span class="header-section-number">2.3.1</span> Scrolling</h3>
<p>Use the mouse wheel, trackpad, or directional arrows (up and down), to scroll up and down the interface, to bring panels into view.</p>
<p>Horizontal scrolling is not possible in <a href="https://shiny.posit.co/"><em>Shiny</em></a> apps.</p>
<div id="fig-scrolling" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/action-scroll.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2.3: Scrolling up and down the app interface.</figcaption>
</figure>
</div>
<p>There is no limit to the number of panels that may be added to the <a href="https://bioconductor.org/packages/iSEE/"><em>iSEE</em></a> user interface.</p>
<p>Meanwhile, no more than twelve panels may be displayed on a single row – one panel per unit in the 12-unit layout of pages produced by the <a href="https://cran.r-project.org/web/packages/shiny/index.html"><em>shiny</em></a> package – with rows being filled from left to right and panels exceeding the 12-unit layout being placed on new rows.</p>
<p>The 12-unit grid system used by <a href="https://cran.r-project.org/web/packages/shiny/index.html"><em>shiny</em></a> is described in the <a href="https://shiny.posit.co/r/articles/build/layout-guide/">Shiny Application layout guide</a>.</p>
</section>
<section id="collabsible-boxes" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="collabsible-boxes"><span class="header-section-number">2.3.2</span> Collabsible boxes</h3>
<p>Click on the header of collapsible boxes located under the panel output, to reveal interactive elements controlling various aspects of the contents displayed in each panel.</p>
<div id="fig-collapsible-box" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/action-collapsible-box.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2.4: Expanding collapsible boxes.</figcaption>
</figure>
</div>
</section>
<section id="selection-inputs" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="selection-inputs"><span class="header-section-number">2.3.3</span> Selection inputs</h3>
<p>Click on dropdown elements to reveal their choices. Click a different choice to see the panel output change accordingly.</p>
<div id="fig-selectinput" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/action-selection-input.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2.5: Changing the selected choice in dropdown menus.</figcaption>
</figure>
</div>
</section>
<section id="checkboxes" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="checkboxes"><span class="header-section-number">2.3.4</span> Checkboxes</h3>
<p>Click on checkboxes to toggle any number of mutually-compatible parameters.</p>
<div id="fig-checboxes" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/action-checkboxes.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2.6: Toggling checkboxes.</figcaption>
</figure>
</div>
</section>
</section>
<section id="collapsible-boxes-of-parameters" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="collapsible-boxes-of-parameters"><span class="header-section-number">2.4</span> Collapsible boxes of parameters</h2>
<section id="data-parameters" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="data-parameters"><span class="header-section-number">2.4.1</span> Data parameters</h3>
<p>The <em>Data parameters</em> collapsible box contains interactive elements that control the nature of the observations displayed in each panel.</p>
<p>For plots, that is typically the choice of variables shown along each axis.</p>
<p>For tables, that is typically the subset of columns <em>hidden</em> in the panel.</p>
<div id="fig-data-param-box-reddimplot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/data-parameters-reduced-dimension-plot.png" class="img-fluid figure-img" width="400"></p>
<figcaption class="figure-caption">Figure&nbsp;2.7: The <em>Data parameters</em> box of the <em>Reduced dimension plot</em> panel, expanded to reveal its contents.</figcaption>
</figure>
</div>
</section>
<section id="visual-parameters" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="visual-parameters"><span class="header-section-number">2.4.2</span> Visual parameters</h3>
<p>The <em>Visual parameters</em> collapsible box contains interactive elements that control the appearance of data points and non-data elements of panels that produce a plot.</p>
<p>That is typically the color, shape, size, and opacity of data points. It may also include the possibility of faceting the plot by discrete variables along each axis, and further customisation of non-data elements of the plot such as axis labels and the plot legend.</p>
<div id="fig-visual-param-box-reddimplot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/visual-parameters-reduced-dimension-plot.png" class="img-fluid figure-img" width="400"></p>
<figcaption class="figure-caption">Figure&nbsp;2.8: The <em>Visual parameters</em> box of the <em>Reduced dimension plot</em> panel, expanded and configured to reveal the ‘Color’, ‘Shape’, ‘Size’, and ‘Facet’ sections of its contents.</figcaption>
</figure>
</div>
</section>
<section id="selection-parameters" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="selection-parameters"><span class="header-section-number">2.4.3</span> Selection parameters</h3>
<p>The <em>Selection parameters</em> collapsible box contains interactive elements that control the transmission and usage of selections in each panel.</p>
<p>That is typically the name of another panel to receive a selection from and whether to restrict data points in the current panel to those selected in the other panel It may also include the possibility of saving and deleting saved selections made in the current panel.</p>
<div id="fig-selection-param-box-reddimplot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/selection-parameters-reduced-dimension-plot.png" class="img-fluid figure-img" width="400"></p>
<figcaption class="figure-caption">Figure&nbsp;2.9: The <em>Selection parameters</em> box of the <em>Reduced dimension plot</em> panel, expanded to reveal its contents.</figcaption>
</figure>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./intro.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./first.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">First use</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>